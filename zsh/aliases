#!/bin/sh

export CLICOLOR=1

alias vi='nvim'
alias vim='nvim'
function start_emacs() {
  if [ "$1" != "" ]; then
    emacsclient -a '' $1
  else
    emacsclient -a '' -nw
  fi
}
alias e='start_emacs'
function start_note() {
  emacs_started=0
  temp=$(tmux list-panes -a -F '#{pane_pid} #I #P' | tr '\n' ':')
  lines=("${(@s/:/)temp}")
  for line in $lines
  do
    part=("${(@s/ /)line}")
    pid=${part[1]}
    cid=$(pgrep -P $pid)
    if [ "$cid" != "" ]; then
      pname=$(ps -p $cid -o comm=)
      if [ "$pname" = "emacsclient" ]; then
        emacs_started=1
        tmux select-window -t ${part[2]}
      fi
    fi
  done
  if [ $emacs_started -eq 0 ]; then
    cd ~/notes && e
  fi

}
alias note='start_note'

function fzf_fg() {
  fg %$(jobs | fzf |awk -F'[][]' '{print ($2)}')
}
alias ff='fzf_fg'

alias ll='ls -l'
alias all='ls -al'
alias .2='cd ../..'
alias .3='cd ../../..'
alias .4='cd ../../../..'
alias .5='cd ../../../../..'
chpwd() { ll }                          # always list upon pwd changed
mcd () { mkdir -p "$1" && cd "$1"; }    # make new dir and cd into it

# git aliases
alias g='git'
alias ga='git add --patch'
alias gs='g status'
alias gc='g checkout'
alias gp='g pull'
alias gd='g diff'
alias gl='g log'
alias gg='g graph'

alias ta='tmux attach'
alias tl='tmux ls'
alias tn='tmux new -s'

alias tf='terraform'

hash -d platform=~/workspaces/indebted/platform
hash -d infra=~/workspaces/indebted/infra
